<ion-list inset>
  <div *ngIf="parentPage === 'presentStudents'">
    <div *ngFor="let student of this.studentService.data | mapValues">
      <div *ngIf="this.studentService.data.get(student.key).location !== 'Checked out'">
        <h3 ion-item>
          <ion-icon name="walk" item-left></ion-icon>
          {{this.studentService.data.get(student.key).fName}} {{this.studentService.data.get(student.key).lName}} {{this.studentService.data.get(student.key)._id}}
          <div item-right>
            <page-student-info-button [thisStudent]="this.studentService.data.get(student.key)._id" [thisStudentLocation]="this.studentService.data.get(student.key).location"></page-student-info-button>
          </div>
        </h3>
      </div>
    </div>
    <div *ngFor="let student of this.studentService.data | mapValues">
      <div *ngIf="this.studentService.data.get(student.key).location === 'Checked out'">
        <h3 ion-item>
          <ion-icon name="walk" item-left></ion-icon>
          {{this.studentService.data.get(student.key).fName}} {{this.studentService.data.get(student.key).lName}} {{this.studentService.data.get(student.key)._id}}
          <div item-right>
            <page-student-info-button [thisStudent]="this.studentService.data.get(student.key)._id" [thisStudentLocation]="this.studentService.data.get(student.key).location"></page-student-info-button>
          </div>
        </h3>
      </div>
    </div>
  </div>

  <div *ngIf="parentPage === 'napStudents'">
    <div *ngFor="let student of this.studentService.data | mapValues">
      <div *ngIf="this.studentService.data.get(student.key).location !== 'Checked out'">
        <h3 ion-item>
          <ion-icon name="walk" item-left></ion-icon>
          {{this.studentService.data.get(student.key).fName}} {{this.studentService.data.get(student.key).lName}} {{this.studentService.data.get(student.key)._id}}
          <div item-right>
            <page-nap-buttons [thisStudent]="this.studentService.data.get(student.key)._id" (napTime)='updateNap($event, this.studentService.data.get(student.key)._id)'></page-nap-buttons>
          </div>
        </h3>
      </div>
    </div>
  </div>

  <div *ngIf="parentPage === 'therapy'">
    <div *ngFor="let student of this.studentService.data | mapValues">
      <div *ngIf="this.studentService.data.get(student.key).location === 'Therapist checked student out'">
        <h3 ion-item>
          <ion-icon name="walk" item-left></ion-icon>
          {{this.studentService.data.get(student.key).fName}} {{this.studentService.data.get(student.key).lName}} {{this.studentService.data.get(student.key)._id}}
          <div item-right>
            <page-action-button [thisStudent]="this.studentService.data.get(student.key)._id" [userID]="this.userID" [studentLocation]="this.studentService.data.get(student.key).location" (checkedOut)='revert($event)' [grandParentPage]="parentPage"></page-action-button>
          </div>
        </h3>
      </div>
    </div>
    <div *ngFor="let student of this.studentService.data | mapValues">
      <div *ngIf="this.studentService.data.get(student.key).location !== 'Checked out' && this.studentService.data.get(student.key).location !==  'Therapist checked student out'  && this.studentService.data.get(student.key).location !== 'Nurse checked student out'">
        <h3 ion-item>
          <ion-icon name="walk" item-left></ion-icon>
          {{this.studentService.data.get(student.key).fName}} {{this.studentService.data.get(student.key).lName}} {{this.studentService.data.get(student.key)._id}}
          <div item-right>
            <page-action-button [thisStudent]="this.studentService.data.get(student.key)._id" [userID]="this.userID" [studentLocation]="this.studentService.data.get(student.key).location" (checkedOut)='revert($event)' [grandParentPage]="parentPage"></page-action-button>
          </div>
        </h3>
      </div>
    </div>
  </div>

  <div *ngIf="parentPage === 'nurse'">
    <div *ngFor="let student of this.studentService.data | mapValues">
      <div *ngIf="this.studentService.data.get(student.key).location === 'Nurse checked student out'">
        <h3 ion-item>
          <ion-icon name="walk" item-left></ion-icon>
          {{this.studentService.data.get(student.key).fName}} {{this.studentService.data.get(student.key).lName}} {{this.studentService.data.get(student.key)._id}}
          <div item-right>
            <page-action-button [thisStudent]="this.studentService.data.get(student.key)._id" [userID]="this.userID" [studentLocation]="this.studentService.data.get(student.key).location" (checkedOut)='revert($event)' [grandParentPage]="parentPage"></page-action-button>
          </div>
        </h3>
      </div>
    </div>
    <div *ngFor="let student of this.studentService.data | mapValues">
      <div *ngIf="this.studentService.data.get(student.key).location !== 'Checked out' && this.studentService.data.get(student.key).location !== 'Therapist checked student out' && this.studentService.data.get(student.key).location !== 'Nurse checked student out'">
        <h3 ion-item>
          <ion-icon name="walk" item-left></ion-icon>
          {{this.studentService.data.get(student.key).fName}} {{this.studentService.data.get(student.key).lName}} {{this.studentService.data.get(student.key)._id}}
          <div item-right>
            <page-action-button [thisStudent]="this.studentService.data.get(student.key)._id" [userID]="this.userID" (checkedOut)='revert($event)' [grandParentPage]="parentPage"></page-action-button>
          </div>
        </h3>
      </div>
    </div>
  </div>

  <div *ngIf="parentPage === 'signout'">
    <div *ngFor="let student of this.studentService.data | mapValues">
      <div *ngIf="this.studentService.data.get(student.key).location !== 'Checked out'">
        <h3 ion-item>
          <ion-icon name="walk" item-left></ion-icon>
          {{this.studentService.data.get(student.key).fName}} {{this.studentService.data.get(student.key).lName}} {{this.studentService.data.get(student.key)._id}}
          <div item-right>
            <page-action-button [thisStudent]="this.studentService.data.get(student.key)._id" [userID]="this.userID" (checkedOut)='revert($event)' [grandParentPage]="parentPage"></page-action-button>
          </div>
        </h3>
      </div>
    </div>
  </div>

  <div *ngIf="parentPage === 'checkin'">
    <div *ngFor="let student of this.studentService.data | mapValues">
      <div *ngIf="this.studentService.data.get(student.key).location === 'Checked out'">
        <h3 ion-item>
          <ion-icon name="walk" item-left></ion-icon>
          {{this.studentService.data.get(student.key).fName}} {{this.studentService.data.get(student.key).lName}} {{this.studentService.data.get(student.key)._id}}
          <div item-right>
            <page-action-button [thisStudent]="this.studentService.data.get(student.key)._id" [userID]="this.userID" (checkedOut)='revert($event)' [grandParentPage]="parentPage"></page-action-button>
          </div>
        </h3>
      </div>
    </div>
  </div>

</ion-list>
<div class="vertical-align-content">
  <ion-grid>
    <ion-row class = "titleRow">
      <ion-col>
        <div class = "centerText" *ngIf="isListEmpty() && this.parentPage === 'checkin'">
          No Students To Check In
        </div>
        <div class = "centerText" *ngIf="isListEmpty() && this.parentPage === 'signout'">
          No Students To Check Out
        </div>
        <div *ngIf="this.parentPage === 'therapy' || this.parentPage === 'napStudents'|| this.parentPage === 'nurse'">
          <div class = "centerText" *ngIf="isListEmpty()">
            No Students Present
          </div>
        </div>
      </ion-col>
    </ion-row>
    <ion-row class="buttonRow">
      <ion-col>
        <div *ngIf="parentPage === 'signout' && !isListEmpty()">
          <button ion-button block (click)="removeStudents()">Checkout</button>
        </div>
        <div *ngIf="parentPage === 'checkin' && !isListEmpty()">
          <button ion-button block (click)="addStudents()">Check In</button>
        </div>
        <div *ngIf="parentPage === 'napStudents' && !isListEmpty()">
          <button ion-button block (click)="updateAll(this.studentService)">Update</button>
        </div>
        <div *ngIf="parentPage !== 'presentStudents' && parentPage !== 'napStudents'">
          <button ion-button block (click)="undo()">Cancel</button>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
  </div>
